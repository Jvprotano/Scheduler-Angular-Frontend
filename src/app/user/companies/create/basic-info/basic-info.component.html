<form [formGroup]="form" class="basic-info-form">
  <mat-card class="mb-4">
    <mat-card-content>
      <!-- Image Upload Section -->
      <div class="image-upload-container">
        <div class="image-preview" [class.has-image]="hasImage()">
          <input class="d-none" id="company-image" type="file" (change)="onFileChange($event)" accept="image/*" />
          <img [src]="hasImage() ? this.image : 'assets/not-found.png'" [alt]="hasImage() ? 'Company Logo' : 'No Image'" />
          <label for="company-image" class="upload-overlay" matRipple>
            <mat-icon>{{ hasImage() ? 'edit' : 'add_a_photo' }}</mat-icon>
            <span>{{ hasImage() ? 'Change Image' : 'Add Logo' }}</span>
          </label>
        </div>
        <button *ngIf="hasImage()" mat-stroked-button color="warn" (click)="removeImage()" class="remove-image-btn">
          <mat-icon>delete</mat-icon>
          Remove Image
        </button>
      </div>

      <!-- Company Details Section -->
      <div class="form-section">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Company Name</mat-label>
          <input matInput formControlName="name" required>
          <mat-error *ngIf="form.get('name')?.hasError('required')">
            Company name is required
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>CNPJ (Optional)</mat-label>
          <input matInput formControlName="cnpj" [mask]="'00.000.000/0000-00'" placeholder="00.000.000/0000-00">
        </mat-form-field>
      </div>

      <!-- Scheduling URL Section -->
      <div class="form-section">
        <h3 class="section-title">Scheduling URL</h3>
        <p class="section-description">
          This is the link your customers will use to make appointments.
        </p>
        
        <div class="url-input-group">
          <mat-form-field appearance="outline" class="prefix-field">
            <input matInput [value]="prefix" readonly>
          </mat-form-field>

          <mat-form-field appearance="outline" class="url-field">
            <mat-label>URL</mat-label>
            <input matInput formControlName="schedulingUrl" 
                   (keyup)="checkUrlIsValid()"
                   placeholder="your-company">
            <mat-hint *ngIf="urlSuccessMessage" class="text-success">
              {{ urlSuccessMessage }}
            </mat-hint>
            <mat-error class="text-error" *ngIf="urlErrorMessage">
              {{ urlErrorMessage }}
            </mat-error>
          </mat-form-field>
        </div>
      </div>
    </mat-card-content>
  </mat-card>
</form>
